window.SVG3DTagCloud=function(o,t){function e(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=t,n=e,n=0<d.width.toString().indexOf("%")||0<d.height.toString().indexOf("%")?(i=Math.round(o.offsetWidth/100*parseInt(d.width)),Math.round(i/100*parseInt(d.height))):(i=parseInt(d.width),parseInt(d.height));t<=i&&(i=t),e<=n&&(n=e),v={x:i/2,y:n/2},w.x=d.speed/v.x,w.y=d.speed/v.y,(f=n<=i?n/100*parseInt(d.radius):i/100*parseInt(d.radius))<1&&(f=1),(h=f/2)<d.radiusMin&&(h=d.radiusMin,f=2*h),l.setAttribute("width",i),l.setAttribute("height",n),d.bgDraw&&(m.setAttribute("width",i),m.setAttribute("height",n)),function(t){for(var e=0,i=y.length;e<i;e++)!function(t,e){var i=t.vectorPosition.x-x.x,n=t.vectorPosition.y-x.y,o=t.vectorPosition.z-x.z,r=Math.sqrt(i*i+n*n+o*o);t.vectorPosition.x/=r,t.vectorPosition.y/=r,t.vectorPosition.z/=r,t.vectorPosition.x*=e,t.vectorPosition.y*=e,t.vectorPosition.z*=e}(y[e],t)}(h)}function i(t){for(var e=function(t){for(var e=0,i=y.length;e<i;e++){var n=y[e];if(n.element.getAttribute("x")===t.getAttribute("x")&&n.element.getAttribute("y")===t.getAttribute("y"))return n}}(t),i=0,n=y.length;i<n;i++){var o=y[i];o.index===e.index?o.mouseOver=!0:o.mouseOver=!1}}function n(){requestAnimFrame(n),function(){var t=w.x*g.x-d.speed,e=d.speed-w.y*g.y,i=t*A,n=e*A;b.sx=Math.sin(i),b.cx=Math.cos(i),b.sy=Math.sin(n),b.cy=Math.cos(n);for(var o=0,r=y.length;o<r;o++){var s,a,c=y[o];p&&(s=c.vectorPosition.x,a=c.vectorPosition.y*b.sy+c.vectorPosition.z*b.cy,c.vectorPosition.x=s*b.cx+a*b.sx,c.vectorPosition.y=c.vectorPosition.y*b.cy+c.vectorPosition.z*-b.sy,c.vectorPosition.z=s*-b.sx+a*b.cx);var u,l=d.fov/(d.fov+c.vectorPosition.z);c.vector2D.x=c.vectorPosition.x*l+v.x,c.vector2D.y=c.vectorPosition.y*l+v.y,c.element.setAttribute("x",c.vector2D.x),c.element.setAttribute("y",c.vector2D.y),p?(u=(h-c.vectorPosition.z)/f)<d.opacityOut&&(u=d.opacityOut):(u=parseFloat(c.element.getAttribute("opacity")),u+=c.mouseOver?(d.opacityOver-u)/d.opacitySpeed:(d.opacityOut-u)/d.opacitySpeed),c.element.setAttribute("opacity",u)}y=y.sort(function(t,e){return e.vectorPosition.z-t.vectorPosition.z})}()}function c(t){p=!1,i(t.target)}function u(t){p=!0}function r(t){var e,i;e=t,i=l.getBoundingClientRect(),g={x:e.clientX-i.left,y:e.clientY-i.top}}function s(t){e()}var d={entries:[],width:480,height:480,radius:"70%",radiusMin:75,bgDraw:!0,bgColor:"#000",opacityOver:1,opacityOut:.05,opacitySpeed:6,fov:800,speed:2,fontFamily:"Arial, sans-serif",fontSize:"15",fontColor:"#fff",fontWeight:"normal",fontStyle:"normal",fontStretch:"normal",fontToUpperCase:!1};if(void 0!==t)for(var a in t)t.hasOwnProperty(a)&&d.hasOwnProperty(a)&&(d[a]=t[a]);if(!d.entries.length)return!1;var h,f,v,l,m,y=[],p=!0,g={x:0,y:0},x={x:0,y:0,z:0},w={x:0,y:0},b={sx:0,cx:0,sy:0,cy:0},A=Math.PI/180,P="http://www.w3.org/2000/svg";window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},(l=document.createElementNS(P,"svg")).addEventListener("mousemove",r),o.appendChild(l),d.bgDraw&&((m=document.createElementNS(P,"rect")).setAttribute("x",0),m.setAttribute("y",0),m.setAttribute("fill",d.bgColor),l.appendChild(m)),function(){for(var t=1,e=d.entries.length+1;t<e;t++){var i=Math.acos((2*t-1)/e-1),n=Math.sqrt(e*Math.PI)*i,o=Math.cos(n)*Math.sin(i),r=Math.sin(n)*Math.sin(i),s=Math.cos(i),a=function(t,e,i,n,o){var r={};return r.element=document.createElementNS(P,"text"),r.element.setAttribute("x",0),r.element.setAttribute("y",0),r.element.setAttribute("fill",d.fontColor),r.element.setAttribute("font-family",d.fontFamily),r.element.setAttribute("font-size",d.fontSize),r.element.setAttribute("font-weight",d.fontWeight),r.element.setAttribute("font-style",d.fontStyle),r.element.setAttribute("font-stretch",d.fontStretch),r.element.setAttribute("text-anchor","middle"),r.element.textContent=d.fontToUpperCase?e.label.toUpperCase():e.label,r.link=document.createElementNS(P,"a"),r.link.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.url),r.link.setAttribute("target",e.target),r.link.addEventListener("mouseover",c,!0),r.link.addEventListener("mouseout",u,!0),r.link.appendChild(r.element),r.index=t,r.mouseOver=!1,r.vectorPosition={x:i,y:n,z:o},r.vector2D={x:0,y:0},l.appendChild(r.link),r}(t-1,d.entries[t-1],o,r,s);y.push(a)}}(),e(),n(),window.addEventListener("resize",s)},"undefined"!=typeof jQuery&&function(e){e.fn.svg3DTagCloud=function(t){return this.each(function(){e.data(this,"plugin_SVG3DTagCloud")||e.data(this,"plugin_SVG3DTagCloud",new SVG3DTagCloud(this,t))})}}(jQuery);