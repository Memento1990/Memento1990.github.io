<!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="content-type" content="text/html; charset=UTF-8"><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css"><meta name="google-site-verification" content="w8WKJGAHwLb_zRDXXltme46tLBr-lH5Twh-IxEBSAYI"><meta name="msvalidate.01" content="F9BCBB6FD152A84AC15581C406FAB2E7"><meta name="baidu-site-verification" content="TOFMGIfar4"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.6/jquery.fancybox.min.css"><link rel="stylesheet" href="//fonts.lug.ustc.edu.cn/css?family=Monda, Consolas, 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'Heiti SC', 'Microsoft YaHei', 'WenQuanYi Micro Hei':300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css"><link rel="stylesheet" href="/css/main.css?v=7.0.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-64x64.png?v=7.0.1"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.ico?v=7.0.1"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.ico?v=7.0.1"><link rel="mask-icon" href="/images/favicon.svg?v=7.0.1" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"7.0.1",sidebar:{position:"left",display:"post",offset:12,onmobile:!1,dimmer:!1,widget:"related_posts"},back2top:!0,back2top_sidebar:!0,fancybox:!0,fastclick:!1,lazyload:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="本文主要介绍了如何植入各种第三方插件, 让你的个人专属博客功能完善丰富多彩."><meta name="keywords" content="hexo,插件"><meta property="og:type" content="article"><meta property="og:title" content="[Hexo 博客系列-02] 第三方插件"><meta property="og:url" content="http://memento.net.cn/post/67805eb2.html"><meta property="og:site_name" content="琅涯阁"><meta property="og:description" content="本文主要介绍了如何植入各种第三方插件, 让你的个人专属博客功能完善丰富多彩."><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://img.memento.net.cn/20190323204231.png"><meta property="og:image" content="http://img.memento.net.cn/20190323205205.png"><meta property="og:image" content="http://img.memento.net.cn/20190323205420.png"><meta property="og:image" content="http://img.memento.net.cn/20190323205857.png"><meta property="og:image" content="http://img.memento.net.cn/20190323211613.png"><meta property="og:image" content="http://img.memento.net.cn/20190323212027.png"><meta property="og:image" content="http://img.memento.net.cn/20190327125928.png"><meta property="og:image" content="http://img.memento.net.cn/20190327130111.png"><meta property="og:updated_time" content="2020-06-26T09:02:16.408Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="[Hexo 博客系列-02] 第三方插件"><meta name="twitter:description" content="本文主要介绍了如何植入各种第三方插件, 让你的个人专属博客功能完善丰富多彩."><meta name="twitter:image" content="http://img.memento.net.cn/20190323204231.png"><link rel="canonical" href="http://memento.net.cn/post/67805eb2.html"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>[Hexo 博客系列-02] 第三方插件 | 琅涯阁</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?2b512f848a24cc63465604675a8ca4fa";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">琅涯阁</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description"><img src="/images/title.png" style="width:60%"></h1></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-首页"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-文档"><a href="/onlinedocs/" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i><br>文档</a></li><li class="menu-item menu-item-资源(多图)"><a href="/resources/" rel="section"><i class="menu-item-icon fa fa-fw fa-envira"></i><br>资源(多图)</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签<span class="badge">36</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-calendar"></i><br>归档<span class="badge">19</span></a></li><li class="menu-item menu-item-友链"><a href="/申请友链/" rel="section"><i class="menu-item-icon fa fa-fw fa-plus"></i><br>友链</a></li><li class="menu-item menu-item-关于"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?2b512f848a24cc63465604675a8ca4fa";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></div></header><a href="https://github.com/Memento1990" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#222;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/post/4f47e744.html" rel="next" title="[Hexo 博客系列-01] 基本设置"><i class="fa fa-chevron-left"></i> [Hexo 博客系列-01] 基本设置</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/post/bc92e064.html" rel="prev" title="[Hexo 博客系列-04] 主题改造">[Hexo 博客系列-04] 主题改造<i class="fa fa-chevron-right"></i></a></div></div><div class="post-block"><link itemprop="mainEntityOfPage" href="http://memento.net.cn/post/67805eb2.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Memento"><meta itemprop="description" content="吾生也有涯, 而知也无涯"><meta itemprop="image" content="/images/favicon-64x64.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="琅涯阁"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">[Hexo 博客系列-02] 第三方插件</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-03-30 21:26:29" itemprop="dateCreated datePublished" datetime="2019-03-30T21:26:29+08:00">2019-03-30</time> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-06-26 17:02:16" itemprop="dateModified" datetime="2020-06-26T17:02:16+08:00">2020-06-26</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i> 热度：<span class="busuanzi-value" id="busuanzi_value_page_pv"></span> <span>℃</span></span><div class="post-symbolscount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span title="本文字数">9.2k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">8 分钟</span></div></div></header><div class="post-body" itemprop="articleBody"><p></p><h2 id="聊天模块"><a href="#聊天模块" class="headerlink" title="聊天模块"></a>聊天模块</h2><h3 id="DaoVioce"><a href="#DaoVioce" class="headerlink" title="DaoVioce"></a>DaoVioce</h3><ol><li>注册<br>首先需要在 <a href="http://www.daovoice.io/" rel="external nofollow noopener noreferrer" target="_blank">DaoVoice</a> 上注册个账号, 可以使用阁主的 <strong>邀请码</strong>: <code>160df6e7</code>;</li><li>按下图所示获取 <code>app_id</code>;<br><img src="http://img.memento.net.cn/20190323204231.png" alt="获取 app_id"></li><li>修改 <code>/themes/next/layout/_custom/head.swig</code>:</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> theme.daovoice %&#125;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">i,s,o,g,r,a,m</span>)</span>&#123;i[<span class="string">"DaoVoiceObject"</span>]=r;i[r]=i[r]||<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;(i[r].q=i[r].q||[]).push(<span class="built_in">arguments</span>)&#125;,i[r].l=<span class="number">1</span>*<span class="keyword">new</span> <span class="built_in">Date</span>();a=s.createElement(o),m=s.getElementsByTagName(o)[<span class="number">0</span>];a.async=<span class="number">1</span>;a.src=g;a.charset=<span class="string">"utf-8"</span>;m.parentNode.insertBefore(a,m)&#125;)(<span class="built_in">window</span>,<span class="built_in">document</span>,<span class="string">"script"</span>,(<span class="string">'https:'</span> == <span class="built_in">document</span>.location.protocol ? <span class="string">'https:'</span> : <span class="string">'http:'</span>) + <span class="string">"//widget.daovoice.io/widget/0f81ff2f.js"</span>,<span class="string">"daovoice"</span>)</span><br><span class="line">        daovoice(<span class="string">'init'</span>, &#123;</span><br><span class="line">            app_id: <span class="string">"&#123;&#123;theme.daovoice_app_id&#125;&#125;"</span></span><br><span class="line">        &#125;);</span><br><span class="line">    daovoice(<span class="string">'update'</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&#123;% endif %&#125;</span></span><br></pre></td></tr></table></figure><ol start="4"><li>最后在主题配置文件中启用并添加你自己的 app id:</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># online contact</span></span><br><span class="line"><span class="attr">daovoice:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">daovoice_app_id:</span> <span class="number">160</span><span class="string">df6e7</span></span><br></pre></td></tr></table></figure><h2 id="内容分享"><a href="#内容分享" class="headerlink" title="内容分享"></a>内容分享</h2><h3 id="AddThis"><a href="#AddThis" class="headerlink" title="AddThis"></a>AddThis</h3><ol><li>前往 <a href="https://www.addthis.com/" rel="external nofollow noopener noreferrer" target="_blank">AddThis</a> 注册一个账号, 注册的时候有一个 <strong>人机身份验证</strong> 的选项，需要翻墙才能刷新出来，不然会一直提示 <strong>reCAPTCHA verification failed. Please try again.</strong> 的注册失败提示！</li><li>然后依次 <code>Add a New Tool -&gt; Share Buttons</code> 创建一个分享按钮，并按照下图所示进行样式设置:</li></ol><ul><li><p>选择分享按钮样式:<br><img src="http://img.memento.net.cn/20190323205205.png" alt="Select a Tool Type"></p></li><li><p>设置分享的 <code>Services</code>, <code>Design</code>, <code>Counters</code>, <code>Position</code>, <code>Behavior</code>:<br><img src="http://img.memento.net.cn/20190323205420.png" alt="Floating"></p></li><li><p>最后 <code>Activate Tool</code> 激活工具即可使用;</p></li></ul><ol start="3"><li>在主题配置文件中启用:</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># AddThis Share, See: https://www.addthis.com</span></span><br><span class="line"><span class="comment"># Go to https://www.addthis.com/dashboard to customize your tools.</span></span><br><span class="line"><span class="attr">add_this_id:</span> <span class="string">xxxxxxxxx</span></span><br></pre></td></tr></table></figure><p>其中 <code>add_this_id</code> 可以如下图所示获取:<br><img src="http://img.memento.net.cn/20190323205857.png" alt="add_this_id"></p><p><em>注意, 该插件在 <code>Firefox</code> 浏览器下失效, 提示 <code>InvalidStateError: An attempt was made to use an object that is not, or is no longer, usable</code> 异常.</em></p><h2 id="评论模块"><a href="#评论模块" class="headerlink" title="评论模块"></a>评论模块</h2><h3 id="Valine"><a href="#Valine" class="headerlink" title="Valine"></a>Valine</h3><p><a href="https://valine.js.org/" rel="external nofollow noopener noreferrer" target="_blank">Valine</a> 诞生于2017年8月7日，是一款基于 Leancloud 的快速、简洁且高效的无后端评论系统。<br>首先，前往 <a href="https://leancloud.cn/" rel="external nofollow noopener noreferrer" target="_blank">leancloud</a> 注册一个账号, 接着需要创建一个应用，名称随意，然后进入 <code>应用 - 设置 - 应用key</code> 以获取 <code>App ID</code> 和 <code>App Key</code>:</p><p><img src="http://img.memento.net.cn/20190323211613.png" alt="appid_appkey"></p><p>在主题配置文件中启用 <code>valine</code>:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Valine</span></span><br><span class="line"><span class="comment"># You can get your appid and appkey from https://leancloud.cn</span></span><br><span class="line"><span class="comment"># More info available at https://valine.js.org</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line"><span class="attr">    enable:</span> <span class="literal">false</span> <span class="comment"># When enable is set to be true, leancloud_visitors is recommended to be closed for the re-initialization problem within different leancloud adk version.</span></span><br><span class="line"><span class="attr">    appid:</span> <span class="string">xxxxxxxxxx</span> <span class="comment"># your leancloud application appid</span></span><br><span class="line"><span class="attr">    appkey:</span> <span class="string">xxxxxxxxxx</span> <span class="comment"># your leancloud application appkey</span></span><br><span class="line"><span class="attr">    notify:</span> <span class="literal">true</span> <span class="comment"># mail notifier, See: https://github.com/xCss/Valine/wiki</span></span><br><span class="line"><span class="attr">    verify:</span> <span class="literal">false</span> <span class="comment"># Verification code</span></span><br><span class="line"><span class="attr">    placeholder:</span> <span class="string">留下你的爪印</span> <span class="comment"># comment box placeholder</span></span><br><span class="line"><span class="attr">    avatar:</span> <span class="string">mm</span> <span class="comment"># gravatar style</span></span><br><span class="line"><span class="attr">    guest_info:</span> <span class="string">nick,mail,link</span> <span class="comment"># custom comment header</span></span><br><span class="line"><span class="attr">    pageSize:</span> <span class="number">10</span> <span class="comment"># pagination size</span></span><br><span class="line"><span class="attr">    language:</span> <span class="comment"># language, available values: en, zh-cn</span></span><br><span class="line"><span class="attr">    visitor:</span> <span class="literal">true</span> <span class="comment"># leancloud-counter-security is not supported for now. When visitor is set to be true, appid and appkey are recommended to be the same as leancloud_visitors' for counter compatibility. Article reading statistic https://valine.js.org/visitor.html</span></span><br><span class="line"><span class="attr">    comment_count:</span> <span class="literal">true</span> <span class="comment"># if false, comment count will only be displayed in post page, not in home page</span></span><br></pre></td></tr></table></figure><p>最后，记得在 <code>LeanCloud - 设置 - 安全中心 - Web 安全域名</code> 中将你博客的域名加入！！</p><p><img src="http://img.memento.net.cn/20190323212027.png" alt="Web 安全域名"><br><em>图为旧设置, 现域名变更为 <code>http://memento.net.cn</code>.</em></p><h3 id="gitment"><a href="#gitment" class="headerlink" title="gitment"></a>gitment</h3><blockquote><p>waiting for update…</p></blockquote><h3 id="gitalk"><a href="#gitalk" class="headerlink" title="gitalk"></a>gitalk</h3><blockquote><p>waiting for update…</p></blockquote><h3 id="gitter"><a href="#gitter" class="headerlink" title="gitter"></a>gitter</h3><blockquote><p>waiting for update…</p></blockquote><h3 id="LiveRe-来必应"><a href="#LiveRe-来必应" class="headerlink" title="LiveRe(来必应)"></a>LiveRe(来必应)</h3><blockquote><p>waiting for update…</p></blockquote><h2 id="3D-标签云"><a href="#3D-标签云" class="headerlink" title="3D 标签云"></a>3D 标签云</h2><p>在上一步的基础上, 安装插件 <code>npm install --save hexo-tag-cloud</code>;<br>然后在 <code>/themes/next/layout/page.swig</code> 定位到 <code>&lt;div class=&quot;tag-cloud-tags&quot;&gt;...&lt;/div&gt;</code>, 在该标签后面添加:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if site.tags.length &gt; 1 %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> <span class="attr">src</span>=<span class="string">"/js/tagcloud.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> <span class="attr">src</span>=<span class="string">"/js/tagcanvas.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"widget-wrap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">"widget-title"</span>&gt;</span>Tag Cloud<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"myCanvasContainer"</span> <span class="attr">class</span>=<span class="string">"widget tagcloud"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"resCanvas"</span> <span class="attr">style</span>=<span class="string">"width:100%"</span>&gt;</span></span><br><span class="line">            &#123;&#123; list_tags() &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>最后再依次执行 <code>hexo clean</code>, <code>hexo g</code>, <code>hexo s</code>, 查看完成的 3D 标签云~</p><h2 id="CNZZ-友盟统计"><a href="#CNZZ-友盟统计" class="headerlink" title="CNZZ 友盟统计"></a>CNZZ 友盟统计</h2><ol><li>注册友盟账号并添加站点, 如下图所示:</li></ol><details><summary>查看图片</summary><img src="http://img.memento.net.cn/20190327125928.png" alt="站点"></details><ol start="2"><li>拷贝其中的统计代码:</li></ol><details><summary>查看图片</summary><img src="http://img.memento.net.cn/20190327130111.png" alt="统计代码"></details><ol start="3"><li>修改模板代码:<br>定位到 <code>/themes/next/layout/_third-party/analytics/cnzz-analytics.swig</code> 模板文件, 修改中间的 <code>&lt;script&gt;</code> 脚本代码, 将第二步中复制的统计代码放进去:</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.cnzz_siteid %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 放置友盟的统计代码 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined">...</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>在主题配置文件中启用 CNZZ 统计</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CNZZ count</span></span><br><span class="line"><span class="attr">cnzz_siteid:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="本地搜索"><a href="#本地搜索" class="headerlink" title="本地搜索"></a>本地搜索</h2><p>参考: <a href="https://github.com/theme-next/hexo-generator-searchdb" rel="external nofollow noopener noreferrer" target="_blank">hexo-generator-searchdb</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure><p>在博客配置文件中添加:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line"><span class="attr">  path:</span> <span class="string">search.xml</span></span><br><span class="line"><span class="attr">  field:</span> <span class="string">post</span></span><br><span class="line"><span class="attr">  format:</span> <span class="string">html</span></span><br><span class="line"><span class="attr">  limit:</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure><p>然后在主题配置文件中启用本地查询:</p><details><br><summary>配置</summary><br><br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-generator-searchdb</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line"><span class="attr">    enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># If auto, trigger search by changing input.</span></span><br><span class="line">    <span class="comment"># If manual, trigger search by pressing enter key or search button.</span></span><br><span class="line"><span class="attr">    trigger:</span> <span class="string">auto</span></span><br><span class="line">    <span class="comment"># Show top n results per article, show all results by setting to -1</span></span><br><span class="line"><span class="attr">    top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">    <span class="comment"># Unescape html strings to the readable one.</span></span><br><span class="line"><span class="attr">    unescape:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><br><br></details><h2 id="博文置顶"><a href="#博文置顶" class="headerlink" title="博文置顶"></a>博文置顶</h2><p>参考:</p><ol><li><a href="https://github.com/hexojs/hexo-generator-index" rel="external nofollow noopener noreferrer" target="_blank">hexojs/hexo-generator-index</a></li><li><a href="https://github.com/netcan/hexo-generator-index-pin-top" rel="external nofollow noopener noreferrer" target="_blank">hexo-generator-index-pin-top</a></li><li><a href="http://www.netcan666.com/2015/11/22/%E8%A7%A3%E5%86%B3Hexo%E7%BD%AE%E9%A1%B6%E9%97%AE%E9%A2%98/" rel="external nofollow noopener noreferrer" target="_blank">解决Hexo置顶问题</a></li></ol><p>卸载原装的 <code>hexo-generator-index</code>, 并安装 <code>hexo-generator-index-pin-top</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-index-pin-top --save</span><br></pre></td></tr></table></figure><p>然后在文章中添加 <code>top</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 2018</span><br><span class="line">date: 2018-10-25 16:10:03</span><br><span class="line">top: 10</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p><code>top</code> 值越大位置越靠前;<br>设置置顶标记, 定位 <code>/themes/next/layout/_macro/post.swig</code> 的 <code>&lt;div class=&quot;post-meta&quot;&gt;</code> 标签下:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if post.top %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-thumb-tack"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">7D26CD</span>&gt;</span>置顶<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"post-meta-divider"</span>&gt;</span>|<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><h2 id="字数统计-阅读时间"><a href="#字数统计-阅读时间" class="headerlink" title="字数统计+阅读时间"></a>字数统计+阅读时间</h2><p>参考: <a href="https://github.com/theme-next/hexo-symbols-count-time" rel="external nofollow noopener noreferrer" target="_blank">hexo-symbols-count-time</a></p><ol><li>安装插件</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-symbols-count-time --save</span><br></pre></td></tr></table></figure><ol start="2"><li>在博客配置文件中启用:</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line"><span class="attr">  symbols:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  time:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  total_symbols:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  total_time:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ol start="3"><li>在主题配置文件中设置:</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Post wordcount display settings</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-symbols-count-time</span></span><br><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line"><span class="attr">    separated_meta:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    item_text_post:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    item_text_total:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    awl:</span> <span class="number">4</span> <span class="comment"># Average Word Length (chars count in word). Default: 4.</span></span><br><span class="line"><span class="attr">    wpm:</span> <span class="number">275</span> <span class="comment"># Words Per Minute. Default: 275.</span></span><br></pre></td></tr></table></figure><h2 id="文末嵌入网页地址-hexo-link"><a href="#文末嵌入网页地址-hexo-link" class="headerlink" title="文末嵌入网页地址 hexo-link"></a>文末嵌入网页地址 hexo-link</h2><p>参考: <a href="https://github.com/acwong00/hexo-addlink" rel="external nofollow noopener noreferrer" target="_blank">hexo-addlink</a></p><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-addlink --save</span><br></pre></td></tr></table></figure><p>在博客配置文件中进行设置:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">addlink:</span></span><br><span class="line"><span class="attr">  before_text:</span> <span class="string">hello</span> <span class="comment"># text before the post link</span></span><br><span class="line"><span class="attr">  after_text:</span> <span class="string">bye</span> <span class="comment"># text after the post link</span></span><br></pre></td></tr></table></figure><h2 id="文章链接持久化"><a href="#文章链接持久化" class="headerlink" title="文章链接持久化"></a>文章链接持久化</h2><p>为了避免 Next 主题默认的以文章标题 <code>title</code> 作为链接的一部分, 导致的 url 地址的中文乱七八糟的问题, 现采用 <code>hexo-abbrlink</code> 插件, 根据一定的算法持久化文章链接;</p><ol><li>安装插件</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure><ol start="2"><li>站点配置文件中设置:</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:abbrlink.html</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line"><span class="attr">  alg:</span> <span class="string">crc32</span>  <span class="comment"># 算法：crc16(default) and crc32</span></span><br><span class="line"><span class="attr">  rep:</span> <span class="string">hex</span>    <span class="comment"># 进制：dec(default) and hex</span></span><br></pre></td></tr></table></figure><ol start="3"><li>同时, 也修改一下 <code>scaffolds</code> 里的模版文件 <code>post.md</code>, 删除默认的 <code>permalink</code> 行;</li></ol><h2 id="文章加密访问"><a href="#文章加密访问" class="headerlink" title="文章加密访问"></a>文章加密访问</h2><ol><li>安装插件:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-blog-encrypt</span><br></pre></td></tr></table></figure><ol start="2"><li>在博客配置文件中启用，也可以配置样式模板:</li></ol><details><br><summary>文章加密</summary><br><br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">encrypt:</span></span><br><span class="line"><span class="attr">    enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    default_abstract:</span> <span class="string">the</span> <span class="string">content</span> <span class="string">has</span> <span class="string">been</span> <span class="string">encrypted,</span> <span class="string">enter</span> <span class="string">the</span> <span class="string">password</span> <span class="string">to</span> <span class="string">read.&lt;/br&gt;</span></span><br><span class="line"><span class="attr">    default_message:</span> <span class="string">Please</span> <span class="string">enter</span> <span class="string">the</span> <span class="string">password</span> <span class="string">to</span> <span class="string">read.</span></span><br><span class="line"><span class="attr">    default_template:</span></span><br><span class="line">        <span class="string">&lt;script</span> <span class="string">src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"&gt;&lt;/script&gt;</span></span><br><span class="line">        <span class="string">&lt;div</span> <span class="string">id="hbe-security"&gt;</span></span><br><span class="line">          <span class="string">&lt;div</span> <span class="string">class="hbe-input-container"&gt;</span></span><br><span class="line">          <span class="string">&lt;input</span> <span class="string">type="password"</span> <span class="string">class="hbe-form-control"</span> <span class="string">id="pass"</span> <span class="string">placeholder="&#123;&#123;message&#125;&#125;"</span> <span class="string">/&gt;</span></span><br><span class="line">            <span class="string">&lt;label</span> <span class="string">for="pass"&gt;&#123;&#123;message&#125;&#125;&lt;/label&gt;</span></span><br><span class="line">            <span class="string">&lt;div</span> <span class="string">class="bottom-line"&gt;&lt;/div&gt;</span></span><br><span class="line">          <span class="string">&lt;/div&gt;</span></span><br><span class="line">        <span class="string">&lt;/div&gt;</span></span><br><span class="line">        <span class="string">&lt;div</span> <span class="string">id="decryptionError"</span> <span class="string">style="display:none;"&gt;&#123;&#123;decryptionError&#125;&#125;&lt;/div&gt;</span></span><br><span class="line">        <span class="string">&lt;div</span> <span class="string">id="noContentError"</span> <span class="string">style="display:none;"&gt;&#123;&#123;noContentError&#125;&#125;&lt;/div&gt;</span></span><br><span class="line">        <span class="string">&lt;div</span> <span class="string">id="encrypt-blog"</span> <span class="string">style="display:none"&gt;</span></span><br><span class="line">        <span class="string">&#123;&#123;content&#125;&#125;</span></span><br><span class="line">        <span class="string">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><br><br></details><p>注意，该插件依赖于 <code>jquery.min.js</code>;</p><ol start="3"><li>最后在写文章时头部设置密码即可:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 2018</span><br><span class="line">date: 2018-10-25 16:10:03</span><br><span class="line">password: 123456</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="NexT-hexo-theme-next-v7-0-1-主题出现解密后-TOC-目录无法显示的问题"><a href="#NexT-hexo-theme-next-v7-0-1-主题出现解密后-TOC-目录无法显示的问题" class="headerlink" title="NexT [hexo-theme-next: v7.0.1] 主题出现解密后 TOC 目录无法显示的问题"></a>NexT [hexo-theme-next: v7.0.1] 主题出现解密后 TOC 目录无法显示的问题</h2><p>修改模板文件: <strong>sidebar.swig</strong><br>主要修改的内容是对于 <code>page.content</code> 的调用, 当 <code>page.encrypt == true</code> 时, 应调用 <code>page.origin</code>; 当 <code>page.encrypt == false</code> 时, 则调用 <code>page.content</code>;<br>具体的修改内容见下:</p><p>{ details 变更一 }</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#123;%</span> <span class="string">if</span> <span class="string">display_toc</span> <span class="string">and</span> <span class="string">toc(page.content).length</span> <span class="string">&gt; 1 %&#125;</span></span><br><span class="line"><span class="string">    ...</span></span><br><span class="line"><span class="string">&#123;% endif %&#125;</span></span><br></pre></td></tr></table></figure><p>变更为:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#123;%</span> <span class="string">if</span> <span class="string">display_toc</span> <span class="string">and</span> <span class="string">page.encrypt</span> <span class="string">==</span> <span class="literal">true</span> <span class="string">and</span> <span class="string">toc(page.origin).length</span> <span class="string">&gt; 1 or page.encrypt == false and toc(page.content).length &gt; 1 %&#125;</span></span><br><span class="line"><span class="string">    ...</span></span><br><span class="line"><span class="string">&#123;% endif %&#125;</span></span><br></pre></td></tr></table></figure><p>{ enddetails }</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"site-overview-wrap sidebar-panel&#123;% if not display_toc or toc(page.content).length &lt;= 1 %&#125; sidebar-panel-active&#123;% endif %&#125;"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>变更为:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"site-overview-wrap sidebar-panel&#123;% if not display_toc or page.encrypt == false and toc(page.content).length &lt;= 1 or page.encrypt == true and toc(page.origin).length &lt;= 1 %&#125; sidebar-panel-active&#123;% endif %&#125;"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#123;%</span> <span class="string">if</span> <span class="string">display_toc</span> <span class="string">and</span> <span class="string">toc(page.content).length</span> <span class="string">&gt; 1 %&#125;</span></span><br><span class="line"><span class="string">    ...</span></span><br><span class="line"><span class="string">&#123;% endif %&#125;</span></span><br></pre></td></tr></table></figure><p>变更为:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#123;%</span> <span class="string">if</span> <span class="string">display_toc</span> <span class="string">and</span> <span class="string">page.encrypt</span> <span class="string">==</span> <span class="literal">true</span> <span class="string">and</span> <span class="string">toc(page.origin).length</span> <span class="string">&gt; 1 or page.encrypt == false and toc(page.content).length &gt; 1 %&#125;</span></span><br><span class="line"><span class="string">    ...</span></span><br><span class="line"><span class="string">&#123;% endif %&#125;</span></span><br></pre></td></tr></table></figure><h2 id="图片懒加载"><a href="#图片懒加载" class="headerlink" title="图片懒加载"></a>图片懒加载</h2><p>安装插件:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-lazyload --save</span><br></pre></td></tr></table></figure><p>然后在博客配置文件中添加设置:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 图片懒加载</span></span><br><span class="line"><span class="attr">lazyload:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># className: # 需要延迟加载的图片 class 选择器, 可选, e.g. .J-lazyload-img</span></span><br><span class="line">  <span class="comment"># loadingImg: # 图片未加载时的代替图, 可选 e.g. ./images/loading.png, 默认: /js/lazyload-plugin/loading.svg</span></span><br></pre></td></tr></table></figure></div><div><div><br><div style="text-align:center;color:#ccc;font-size:14px">--------------------本文至此结束&nbsp;<i class="fa fa-heartbeat"></i>&nbsp;感谢您的阅读--------------------</div><br></div></div><blockquote><div class="popular-posts-header">相关文章</div></blockquote><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="\post\b96cbb80.html" rel="bookmark">[Hexo 博客插件系列-03] 博客备份 hexo-git-backup</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\post\dcfce0c7.html" rel="bookmark">[Hexo 博客插件系列-04] 3D标签云 svg3dtagcloud</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\post\6f3f19b1.html" rel="bookmark">[Hexo 博客插件系列-02] 语雀 yuque-hexo</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\post\4af0cb81.html" rel="bookmark">[Hexo 博客插件系列-01] 相关文章之 hexo-related-popular-posts</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\post\3943aa90.html" rel="bookmark">[文章汇总] Hexo 博客系列 [最近更新: 2019/04/24]</a></div></li></ul><div><div class="my_post_copyright"><p><span>本文标题:</span><a href="/post/67805eb2.html">[Hexo 博客系列-02] 第三方插件</a></p><p><span>文章作者:</span><a href="/" title="访问 Memento 的个人博客">Memento</a></p><p><span>发布时间:</span>2019年03月30日 - 21:03</p><p><span>最后更新:</span>2020年06月26日 - 17:06</p><p><span>原始链接:</span><a href="/post/67805eb2.html" title="[Hexo 博客系列-02] 第三方插件">http://memento.net.cn/post/67805eb2.html</a></p><p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p></div><script>function addLink(){var e=document.body,n=window.getSelection(),t="原文出自[Memento 博客](http://memento.net.cn)",o="除特别声明外，署名-非商业性使用-禁止演绎 4.0 国际",i="转载请保留原文链接及作者: "+document.location.href;if(window.clipboardData){var d=n+"\r\n\r\n"+t+"\n"+o+"\n"+i;return window.clipboardData.setData("Text",d),!1}d=n+"<br /><br />"+t+"<br />"+o+"<br />"+i;var r=document.createElement("div");r.style.position="absolute",r.style.left="-99999px",e.appendChild(r),r.innerHTML=d,n.selectAllChildren(r),window.setTimeout(function(){e.removeChild(r)},0)}document.oncopy=addLink</script></div><footer class="post-footer"><div class="post-tags"><a href="/tags/hexo/" rel="tag"><i class="fa fa-tag"></i> hexo</a><a href="/tags/插件/" rel="tag"><i class="fa fa-tag"></i> 插件</a></div></footer></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/post/4f47e744.html" rel="next" title="[Hexo 博客系列-01] 基本设置"><i class="fa fa-chevron-left"></i> [Hexo 博客系列-01] 基本设置</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/post/bc92e064.html" rel="prev" title="[Hexo 博客系列-04] 主题改造">[Hexo 博客系列-04] 主题改造<i class="fa fa-chevron-right"></i></a></div></div></article></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/favicon-64x64.png" alt="Memento"><p class="site-author-name" itemprop="name">Memento</p><div class="site-description motion-element" itemprop="description">吾生也有涯, 而知也无涯</div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">19</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">3</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">36</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Memento1990" title="GitHub &rarr; https://github.com/Memento1990" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://www.cnblogs.com/memento" title="博客园 &rarr; http://www.cnblogs.com/memento" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-star"></i> 博客园</a></span><span class="links-of-author-item"><a href="mailto:731996261@qq.com" title="E-Mail &rarr; mailto:731996261@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#聊天模块"><span class="nav-number">1.</span> <span class="nav-text">聊天模块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DaoVioce"><span class="nav-number">1.1.</span> <span class="nav-text">DaoVioce</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#内容分享"><span class="nav-number">2.</span> <span class="nav-text">内容分享</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#AddThis"><span class="nav-number">2.1.</span> <span class="nav-text">AddThis</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#评论模块"><span class="nav-number">3.</span> <span class="nav-text">评论模块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Valine"><span class="nav-number">3.1.</span> <span class="nav-text">Valine</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gitment"><span class="nav-number">3.2.</span> <span class="nav-text">gitment</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gitalk"><span class="nav-number">3.3.</span> <span class="nav-text">gitalk</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gitter"><span class="nav-number">3.4.</span> <span class="nav-text">gitter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LiveRe-来必应"><span class="nav-number">3.5.</span> <span class="nav-text">LiveRe(来必应)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3D-标签云"><span class="nav-number">4.</span> <span class="nav-text">3D 标签云</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CNZZ-友盟统计"><span class="nav-number">5.</span> <span class="nav-text">CNZZ 友盟统计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#本地搜索"><span class="nav-number">6.</span> <span class="nav-text">本地搜索</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#博文置顶"><span class="nav-number">7.</span> <span class="nav-text">博文置顶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字数统计-阅读时间"><span class="nav-number">8.</span> <span class="nav-text">字数统计+阅读时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文末嵌入网页地址-hexo-link"><span class="nav-number">9.</span> <span class="nav-text">文末嵌入网页地址 hexo-link</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文章链接持久化"><span class="nav-number">10.</span> <span class="nav-text">文章链接持久化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文章加密访问"><span class="nav-number">11.</span> <span class="nav-text">文章加密访问</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NexT-hexo-theme-next-v7-0-1-主题出现解密后-TOC-目录无法显示的问题"><span class="nav-number">12.</span> <span class="nav-text">NexT [hexo-theme-next: v7.0.1] 主题出现解密后 TOC 目录无法显示的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#图片懒加载"><span class="nav-number">13.</span> <span class="nav-text">图片懒加载</span></a></li></ol></div></div></div><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2019 – <span itemprop="copyrightYear">2020</span><span class="with-love" id="animate"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">琅涯阁</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span title="站点总字数">45k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span title="站点阅读时长">41 分钟</span> <a href="http://www.beian.miit.gov.cn/" rel="external nofollow noopener noreferrer" target="_blank">粤ICP备19147538号</a></div><span id="sitetime"></span><script language="javascript">function siteTime(){window.setTimeout("siteTime()",1e3);var e=36e5,t=24*e,o=new Date,i=o.getFullYear(),a=o.getMonth()+1,n=o.getDate(),r=o.getHours(),l=o.getMinutes(),s=o.getSeconds(),M=Date.UTC(2019,3,18,16,39,37),g=Date.UTC(i,a,n,r,l,s)-M,m=Math.floor(g/31536e6),T=Math.floor(g/t-365*m),f=Math.floor((g-(365*m+T)*t)/e),h=Math.floor((g-(365*m+T)*t-f*e)/6e4),u=Math.floor((g-(365*m+T)*t-f*e-6e4*h)/1e3);document.getElementById("sitetime").innerHTML=" 本站已运行 "+T+" 天 "+f+" 小时 "+h+" 分钟 "+u+" 秒"}siteTime()</script><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div><div><script>var cnzz_protocol="https:"==document.location.protocol?"https://":"http://";document.write(unescape("%3Cspan id='cnzz_stat_icon_1276813148'%3E%3C/span%3E%3Cscript src='"+cnzz_protocol+"s23.cnzz.com/z_stat.php%3Fid%3D1276813148%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"))</script></div></div></footer></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.ui.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.6/jquery.fancybox.min.js"></script><script src="/js/src/utils.js?v=7.0.1"></script><script src="/js/src/motion.js?v=7.0.1"></script><script src="/js/src/affix.js?v=7.0.1"></script><script src="/js/src/schemes/pisces.js?v=7.0.1"></script><script src="/js/src/scrollspy.js?v=7.0.1"></script><script src="/js/src/post-details.js?v=7.0.1"></script><script src="/js/src/next-boot.js?v=7.0.1"></script><script>// Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script></body></html>